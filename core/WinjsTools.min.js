/*
	Collection of tools for WinJS
	author: @CKGrafico
	version: 0.3
*/

(function(e,t){"use strict";var n=Windows.Networking.Connectivity.NetworkInformation;var r=Windows.Networking.Connectivity.NetworkConnectivityLevel;var i=Windows.ApplicationModel.Store.CurrentApp;var s=Windows.ApplicationModel.Store.CurrentAppSimulator;var o=i.licenseInformation;var u=Windows.Storage.ApplicationData.current;var a=u.roamingSettings;var f=WinJS.Class.define(function(){},{alert:function(e){var n={text:"",button:"Accept",callback:function(){}};if(typeof e==="string"){n.text=e}else{t.extend(n,e)}this.alertThree({text:n.text,options:[{button:n.button,callback:n.callback}]})},confirm:function(e){var n={text:"",buttonAccept:"Accept",onAccept:function(){},buttonCancel:"Cancel",onCancel:function(){}};if(typeof e==="string"){n.text=e}else{t.extend(n,e)}this.alertThree({text:n.text,options:[{button:n.buttonAccept,callback:n.onAccept},{button:n.buttonCancel,callback:n.onCancel}]})},alertThree:function(e){var n={text:"",options:[{button:"Ok",callback:function(){}}]};if(typeof e==="string"){n.text=e}else{t.extend(n,e)}var r;if(!r){r=true;setTimeout(function(){var e=new Windows.UI.Popups.MessageDialog(n.text);t.each(n.options,function(t,n){if(n<3){e.commands.append(new Windows.UI.Popups.UICommand(t.button,t.callback))}});e.showAsync().done(function(){r=false})})}},isOnline:function(){var e=n.getInternetConnectionProfile();if(e===null){return false}var t=e.getNetworkConnectivityLevel();if(t===r.none||t===r.localAccess||t===r.constrainedInternetAccess){return false}return true},onlineAction:function(e,t){if(this.isOnline()){e()}else{this.alert(t)}},roaming:function(e,t){if(t){a.values[e]=t}else{return a.values[e]}},purchase:function(e){var n={id:"",debugMode:false,onDone:function(){console.log("Done purchase "+n.id)},onFail:function(e){console.log("FAIL purchase "+n.id)}};t.extend(n,e);var r;if(n.debugMode){r=s;console.log("You're in debug mode for purchase with id: "+n.id)}else{r=i}r.requestProductPurchaseAsync(n.id).done(function(e){if(o.productLicenses.lookup(n.id).isActive){n.onDone(e)}else{n.onFail(e)}})},charm:function(e,t,n){WinJS.Application.onsettings=function(r){var i=r.detail.e.request.applicationCommands;var s=new Windows.UI.ApplicationSettings.SettingsCommand(e,t,n);i.append(s)}},charmLink:function(e,t,n){this.charm(e,t,function(){window.open(n)})}});e.WinjsTools=new f})(this,_)